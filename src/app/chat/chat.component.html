<div class="chat" fxFlex fxLayout="column" *ngIf="canChat()">

	<div id="chat-content" fusePerfectScrollbar fxFlex="1 1 auto" (scroll)="onScroll($event)" #chatContainer>
		<div class="chat-messages">
			<div class="message-row" *ngFor="let message of messages;" 
				[ngClass]="{
					'me': message.author === currentUser,
					'contact': message.author !== currentUser
				}">
				<img *ngIf="message.author !== currentUser" src="../../assets/icons/Team-T-Icon.svg" class="avatar"/>
				<!-- message.author available here as well -->
				<div class="bubble">
					<div class="message">{{ message.body }}</div>
					<div class="time secondary-text">time</div>
				</div>
				
			</div>
		</div>
	</div>

	 <!-- CHAT FOOTER -->
    <div class="chat-footer" fxFlex="0 0 auto" fxLayout="column">

        <!-- REPLY FORM -->
        <div class="reply-form" fxFlex="0 0 auto" fxLayout="row" fxLayoutAlign="center center">

            <form #replyForm="ngForm"
                  (ngSubmit)="sendMessage(msgInput.value); msgInput.value=''" 
                  fxFlex fxLayout="row" fxLayoutAlign="start center">

                <mat-form-field class="message-text" fxFlex floatLabel="never" appearance="standard">
                	<input matInput #msgInput placeholder="Type your message here">
                </mat-form-field>

                <button class="send-message-button" mat-icon-button type="submit" aria-label="Send message">
                    <mat-icon class="secondary-text">send</mat-icon>
                </button>

            </form>

        </div>
        <!-- / REPLY FORM -->

    </div>

</div>

<div *ngIf="!canChat()">
	Can not Chat
</div>
